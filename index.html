<html>
<head>
  <script src="https://dahashimoto.github.io/dahashimoto.github.io-master/scripts/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://dahashimoto.github.io/dahashimoto.github.io-master/css/normalize.css">
  <script src="https://dahashimoto.github.io/dahashimoto.github.io-master/scripts/jquery.imagemapster.js"></script>
<style type="text/css"> </style>

<script type='text/javascript'>//<![CDATA[
// $(window).on('load', function(){
//   $('img').mapster({
//          fillColor: '#0d5330',
//          fillOpacity: 0.3
//      });
//
//   $('img').mapster('get',key);
//   // $('area[state=CO]').mapster('set',false)
//   //     .mapster('set',true,{ fillColor: 'ff0000' });
//
//      });
$(window).on('load', function(){
var image = $('#img');
var activeAreas = $('area.active');

// build area data from areas

var areas = $.map($('area[alt]'),function(el) {
    return {
        key: $(el).attr('step'),
        toolTip: $(el).attr('alt')
    };
});

function copySelectionsToHiddenField() {
    $('#selectedKeys').val(image.mapster('get'));
}

image.mapster({
    fillOpacity: 0.9,
    fillColor: "ff0000",
    stroke: true,
    strokeColor: "000000",
    strokeWidth: 4,
    mapKey: 'name',
    showToolTip: true,
    areas: areas,
    onStateChange: function(e) {
        if (e.state==='select') {
            copySelectionsToHiddenField();
        }
    }
});

$('#test1').bind('click',function() {

   alert($('#selectedKeys').val());
});

</script>
</head>

<body>
<center>
  <img id="map" src="images/EW_Small.jpg" border="0" usemap="#EW_step_map" width="1002" height="753px">

<map id="map" name="EW_step_map">
  <!-- #$-:Image map file created by GIMP Image Map plug-in -->
  <!-- #$-:GIMP Image Map plug-in by Maurits Rijk -->
  <!-- #$-:Please do not edit lines starting with "#$" -->
  <!-- #$VERSION:2.3 -->
  <!-- #$AUTHOR:Daniel Hashimoto -->
  <area shape="rect" coords="2,180,72,226" alt="Divide GB peritoneum" step="Divide_GB_p" href="#" />
  <area shape="rect" coords="86,229,202,287" alt="Position structures"   step="Position_struc" href="#" />
  <area shape="rect" coords="238,230,294,288" alt="Visualize node"   step="Vis_node" href="#" />
  <area shape="rect" coords="326,241,410,279" alt="Expose calot"   step="Expose_calot" href="#" />
  <area shape="rect" coords="538,236,608,272" alt="Isolate duct"   step="Iso_duct" href="#" />
  <area shape="rect" coords="539,326,616,360" alt="Isolate artery"   step="Iso_art" href="#" />
  <area shape="rect" coords="673,235,739,272" alt="Divide duct"   step="Div_duct" href="#" />
  <area shape="rect" coords="674,330,750,366" alt="Divide artery"   step="Div_art" href="#" />
  <area shape="rect" coords="842,226,870,246" alt="Clip duct"   step="Clip_duct" href="#" />
  <area shape="rect" coords="801,259,860,279" alt="Endoloop duct"   step="Endoloop" href="#" />
  <area shape="rect" coords="804,295,848,318" alt="Staple duct"   step="Staple_duct" href="#" />
  <area shape="rect" coords="921,235,990,290" alt="Remove GB from liver bed"   step="Remove_GB" href="#" />
  <area shape="rect" coords="9,342,108,376" alt="Divide adhesions"   step="Div_adhesion" href="#" />
  <area shape="rect" coords="247,181,303,206" alt="Bleeding"   step="Bleeding" href="#" />
  <area shape="rect" coords="330,162,399,184" alt="Hemostasis"   step="Hemostasis" href="#" />
  <area shape="rect" coords="443,171,468,185" alt="Perform IOC"   step="IOC" href="#" />
  <area shape="rect" coords="554,117,615,148" alt="Bile duct exploration"   step="BD_exp" href="#" />
  <area shape="rect" coords="660,34,703,61" alt="Lap or Open Bile Duct Exploration"   step="Lap_Open_BD_Exp" href="#" />
  <area shape="rect" coords="662,95,709,122" alt="Postop ERCP"   step="ERCP" href="#" />
  <area shape="rect" coords="938,347,966,372" alt="Spill Bile"   step="Spill_bile" href="#" />
  <area shape="rect" coords="959,416,1001,445" alt="Suction bile"   step="Suck_bile" href="#" />
  <area shape="rect" coords="354,459,416,494" alt="Injury to structure"   no step="Inj_struct" href="#" />
  <area shape="rect" coords="504,519,545,550" alt="GB injury"   step="GB_Inj" href="#" />
  <area shape="rect" coords="491,566,562,595" alt="Cystic artery injury"   step="Cyst_art_inj" href="#" />
  <area shape="rect" coords="744,485,821,533" alt="Fold GB for compression"   step="Fold_GB" href="#" />
  <area shape="rect" coords="753,545,828,580" alt="Sponge for compression"   step="Sponge" href="#" />
  <area shape="rect" coords="655,573,710,597" alt="Bleeding after cystic artery injury"   step="Bleed__cystic_art_inj" href="#" />
  <area shape="rect" coords="499,606,536,635" alt="CBD injury"   step="CBD_inj" href="#" />
  <area shape="rect" coords="599,608,648,637" alt="Call HPB surgeon"   step="Call_HPB" href="#" />
  <area shape="rect" coords="630,672,665,698" alt="ID injury"   step="ID_Inj" href="#" />
  <area shape="rect" coords="744,646,789,677" alt="Primary repair"   step="Primary_repair" href="#" />
  <area shape="rect" coords="748,692,780,719" alt="T tube"   step="Ttube" href="#" />
  <area shape="rect" coords="229,295,294,330" alt="Adjust retraction" step="adjust_retract" href="#" />
  </map>
</center>


</body>
</html>
