<html>
<head>
  <script src="https://dahashimoto.github.io/dahashimoto.github.io-master/scripts/jquery-1.7.1.js"></script>
  <link rel="stylesheet" type="text/css" href="https://dahashimoto.github.io/dahashimoto.github.io-master/css/normalize.css">
  <script src="https://dahashimoto.github.io/dahashimoto.github.io-master/scripts/jquery.imagemapster.js"></script>
<style type="text/css"> </style>

<script type='text/javascript'>//<![CDATA[
// $(window).on('load', function(){ //Used to handle for jquery >1.8
$(window).load(function(){
var image = $('#map');
var activeAreas = $('area.active');

// build area data from areas

var areas = $.map($('area[name]'),function(el) {
    return {
        key: $(el).attr('name'),
        toolTip: $(el).attr('name')
    };
});

function copySelectionsToHiddenField() {
    $('#selectedKeys').val(image.mapster('get'));
}

image.mapster({
    fillOpacity: 0.5,
    fillColor: "0d5330",
    stroke: true,
    strokeColor: "000000",
    strokeWidth: 4,
    mapKey: 'name',
    showToolTip: true,
    areas: areas,
    onStateChange: function(e) {
        if (e.state==='select') {
            copySelectionsToHiddenField();
        }
    }
});

$('#test1').bind('click',function() {

   alert($('#selectedKeys').val());
});
});//]]>

</script>
</head>

<body>
<center>

  <div id="test1" style="border: 1px solid black; padding: 4px;">
  <form action="/action_page.php" method="post">
      Name: <input type="text" name="name">
      <input type="hidden" id="selectedKeys" name="selectedKeys">
      <input type="submit" value="Submit">
  </form>
</div>

<img id="map" src="images/EW_Small.jpg" border="0" usemap="#EW_step_map" width="1002" height="753px">
<map id="stepmap" name="EW_step_map">
  <area shape="rect" coords="2,180,72,226" name="Divide GB peritoneum" step="Divide_GB_p" href="#" />
  <area shape="rect" coords="86,229,202,287" name="Position structures"   step="Position_struc" href="#" />
  <area shape="rect" coords="238,230,294,288" name="Visualize node"   step="Vis_node" href="#" />
  <area shape="rect" coords="326,241,410,279" name="Expose calot"   step="Expose_calot" href="#" />
  <area shape="rect" coords="538,236,608,272" name="Isolate duct"   step="Iso_duct" href="#" />
  <area shape="rect" coords="539,326,616,360" name="Isolate artery"   step="Iso_art" href="#" />
  <area shape="rect" coords="673,235,739,272" name="Divide duct"   step="Div_duct" href="#" />
  <area shape="rect" coords="674,330,750,366" name="Divide artery"   step="Div_art" href="#" />
  <area shape="rect" coords="842,226,870,246" name="Clip duct"   step="Clip_duct" href="#" />
  <area shape="rect" coords="801,259,860,279" name="Endoloop duct"   step="Endoloop" href="#" />
  <area shape="rect" coords="804,295,848,318" name="Staple duct"   step="Staple_duct" href="#" />
  <area shape="rect" coords="921,235,990,290" name="Remove GB from liver bed"   step="Remove_GB" href="#" />
  <area shape="rect" coords="9,342,108,376" name="Divide adhesions"   step="Div_adhesion" href="#" />
  <area shape="rect" coords="247,181,303,206" name="Bleeding"   step="Bleeding" href="#" />
  <area shape="rect" coords="330,162,399,184" name="Hemostasis"   step="Hemostasis" href="#" />
  <area shape="rect" coords="443,171,468,185" name="Perform IOC"   step="IOC" href="#" />
  <area shape="rect" coords="554,117,615,148" name="Bile duct exploration"   step="BD_exp" href="#" />
  <area shape="rect" coords="660,34,703,61" name="Lap or Open Bile Duct Exploration"   step="Lap_Open_BD_Exp" href="#" />
  <area shape="rect" coords="662,95,709,122" name="Postop ERCP"   step="ERCP" href="#" />
  <area shape="rect" coords="938,347,966,372" name="Spill Bile"   step="Spill_bile" href="#" />
  <area shape="rect" coords="959,416,1001,445" name="Suction bile"   step="Suck_bile" href="#" />
  <area shape="rect" coords="354,459,416,494" name="Injury to structure"   no step="Inj_struct" href="#" />
  <area shape="rect" coords="504,519,545,550" name="GB injury"   step="GB_Inj" href="#" />
  <area shape="rect" coords="491,566,562,595" name="Cystic artery injury"   step="Cyst_art_inj" href="#" />
  <area shape="rect" coords="744,485,821,533" name="Fold GB for compression"   step="Fold_GB" href="#" />
  <area shape="rect" coords="753,545,828,580" name="Sponge for compression"   step="Sponge" href="#" />
  <area shape="rect" coords="655,573,710,597" name="Bleeding after cystic artery injury"   step="Bleed__cystic_art_inj" href="#" />
  <area shape="rect" coords="499,606,536,635" name="CBD injury"   step="CBD_inj" href="#" />
  <area shape="rect" coords="599,608,648,637" name="Call HPB surgeon"   step="Call_HPB" href="#" />
  <area shape="rect" coords="630,672,665,698" name="ID injury"   step="ID_Inj" href="#" />
  <area shape="rect" coords="744,646,789,677" name="Primary repair"   step="Primary_repair" href="#" />
  <area shape="rect" coords="748,692,780,719" name="T tube"   step="Ttube" href="#" />
  <area shape="rect" coords="229,295,294,330" name="Adjust retraction" step="adjust_retract" href="#" />
  </map>
</center>

</body>
</html>
